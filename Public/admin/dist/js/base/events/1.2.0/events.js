/*! zuboke 2015-01-26 */
function Events(){}function triggerEvents(a,b,c){var d=!0;if(a){var e=0,f=a.length,g=b[0],h=b[1],i=b[2];switch(b.length){case 0:for(;f>e;e+=2)d=a[e].call(a[e+1]||c)!==!1&&d;break;case 1:for(;f>e;e+=2)d=a[e].call(a[e+1]||c,g)!==!1&&d;break;case 2:for(;f>e;e+=2)d=a[e].call(a[e+1]||c,g,h)!==!1&&d;break;case 3:for(;f>e;e+=2)d=a[e].call(a[e+1]||c,g,h,i)!==!1&&d;break;default:for(;f>e;e+=2)d=a[e].apply(a[e+1]||c,b)!==!1&&d}}return d}function isFunction(a){return"[object Function]"===Object.prototype.toString.call(a)}var eventSplitter=/\s+/;Events.prototype.on=function(a,b,c){var d,e,f;if(!b)return this;for(d=this.__events||(this.__events={}),a=a.split(eventSplitter);e=a.shift();)f=d[e]||(d[e]=[]),f.push(b,c);return this},Events.prototype.once=function(a,b,c){var d=this,e=function(){d.off(a,e),b.apply(c||d,arguments)};return this.on(a,e,c)},Events.prototype.off=function(a,b,c){var d,e,f,g;if(!(d=this.__events))return this;if(!(a||b||c))return delete this.__events,this;for(a=a?a.split(eventSplitter):keys(d);e=a.shift();)if(f=d[e])if(b||c)for(g=f.length-2;g>=0;g-=2)b&&f[g]!==b||c&&f[g+1]!==c||f.splice(g,2);else delete d[e];return this},Events.prototype.trigger=function(a){var b,c,d,e,f,g,h=[],i=!0;if(!(b=this.__events))return this;for(a=a.split(eventSplitter),f=1,g=arguments.length;g>f;f++)h[f-1]=arguments[f];for(;c=a.shift();)(d=b.all)&&(d=d.slice()),(e=b[c])&&(e=e.slice()),"all"!==c&&(i=triggerEvents(e,h,this)&&i),i=triggerEvents(d,[c].concat(h),this)&&i;return i},Events.prototype.emit=Events.prototype.trigger;var keys=Object.keys;keys||(keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}),Events.mixTo=function(a){function b(b){a[b]=function(){return c[b].apply(e,Array.prototype.slice.call(arguments)),this}}var c=Events.prototype;if(isFunction(a)){for(var d in c)c.hasOwnProperty(d)&&(a.prototype[d]=c[d]);Object.keys(c).forEach(function(b){a.prototype[b]=c[b]})}else{var e=new Events;for(var d in c)c.hasOwnProperty(d)&&b(d)}},module.exports=Events;