/*! zuboke 2015-01-26 */
function convertTemplateToObject(a){return isFunction(a)?null:$(encode(a))}function convertObjectToTemplate(a,b){if(a){var c;if(b){if(c=a.find(b),0===c.length)throw new Error("Invalid template selector: "+b)}else c=a;return decode(c.html())}}function encode(a){return a.replace(/({[^}]+}})/g,"<!--$1-->").replace(/\s(src|href)\s*=\s*(['"])(.*?\{.+?)\2/g," data-templatable-$1=$2$3$2")}function decode(a){return a.replace(/(?:<|&lt;)!--({{[^}]+}})--(?:>|&gt;)/g,"$1").replace(/data-templatable-/gi,"")}function isFunction(a){return"function"==typeof a}function precompile(a){if(!a)return{};var b={};for(var c in a){var d=a[c];b[c]=isFunction(d)?d:Handlebars.compile(d)}return b}var $=require("jquery"),Handlebars=require("handlebars")["default"],compiledTemplates={};module.exports={templateHelpers:null,templatePartials:null,templateObject:null,parseElementFromTemplate:function(){var a,b=this.get("template");/^#/.test(b)&&(a=document.getElementById(b.substring(1)))&&(b=a.innerHTML,this.set("template",b)),this.templateObject=convertTemplateToObject(b),this.element=$(this.compile())},compile:function(a,b){if(a||(a=this.get("template")),b||(b=this.get("model"))||(b={}),b.toJSON&&(b=b.toJSON()),isFunction(a))return a(b,{helpers:this.templateHelpers,partials:precompile(this.templatePartials)});var c,d,e=this.templateHelpers,f=this.templatePartials;if(e)for(c in e)e.hasOwnProperty(c)&&Handlebars.registerHelper(c,e[c]);if(f)for(d in f)f.hasOwnProperty(d)&&Handlebars.registerPartial(d,f[d]);var g=compiledTemplates[a];g||(g=compiledTemplates[a]=Handlebars.compile(a));var h=g(b);if(e)for(c in e)e.hasOwnProperty(c)&&delete Handlebars.helpers[c];if(f)for(d in f)f.hasOwnProperty(d)&&delete Handlebars.partials[d];return h},renderPartial:function(a){if(this.templateObject){var b=convertObjectToTemplate(this.templateObject,a);b?a?this.$(a).html(this.compile(b)):this.element.html(this.compile(b)):this.element.html(this.compile())}else{var c=$(this.compile()),d=c.find(a);d.length?this.$(a).html(d.html()):this.element.html(c.html())}return this}};var _compile=Handlebars.compile;Handlebars.compile=function(a){return isFunction(a)?a:_compile.call(Handlebars,a)};