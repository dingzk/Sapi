/*! zuboke 2015-01-26 */
function createMonthModel(a,b,c){var d=a.month(),e=[];for(i=0;i<MONTHS.length;i++){var f={value:i,available:c.inRange.call(c,i),label:MONTHS[i]};b&&(f.type="month",f=b(f)),e.push(f)}for(var g={year:a.year(),value:d,label:MONTHS[d]},h=[],i=0;i<e.length/3;i++)h.push(e.slice(3*i,3*i+3));return{current:g,items:h}}function isInRange(a,b){if(null==b)return!0;if($.isArray(b)){var c=b[0],d=b[1],e=!0;if(c&&c.month){var f=a.clone().date(a.daysInMonth());f.hour(23).minute(59).second(59).millisecond(999),e=e&&f>=c}else c&&(e=e&&a.month()+1>=c);if(d&&d.month){var g=a.clone().date(1);g.hour(0).minute(0).second(0).millisecond(0),e=e&&d>=g}else d&&(e=e&&a.month()+1<=d);return e}return $.isFunction(b)?b(a):!0}function template(a,b){var c=b.helpers._,d='<table class="ui-calendar-month" data-role="month-column">';return $.each(a.items,function(b,e){d+='<tr class="ui-calendar-month-column" data-year="'+a.current.year+'">',$.each(e,function(a,b){d+='<td data-role="month"',b.available||(d+=' class="disabled-element"'),d+='data-value="'+b.value+'">',d+=c(b.label)+"</td>"}),d+="</tr>"}),d+="</table>"}var $=require("jquery"),moment=require("moment"),BaseColumn=require("./base-column"),MonthColumn=BaseColumn.extend({attrs:{template:template,process:null,model:{getter:function(){return createMonthModel(this.get("focus"),this.get("process"),this)}}},events:{"click [data-role=month]":function(a){var b=$(a.target),c=b.data("value");this.select(c,b)}},setup:function(){MonthColumn.superclass.setup.call(this),this.on("change:range",function(){this.element.html($(this.compileTemplate()).html())})},prev:function(){var a=this.get("focus").add("months",-1);return this._sync(a)},next:function(){var a=this.get("focus").add("months",1);return this._sync(a)},select:function(a,b){if(b&&b.hasClass("disabled-element"))return this.trigger("selectDisable",a,b),a;var c;return c=a.month?a:this.get("focus").month(a),this._sync(c,b)},focus:function(a){a=a||this.get("focus");var b='[data-value="'+a.month()+'"]';this.element.find(".focused-element").removeClass("focused-element"),this.element.find(b).addClass("focused-element")},refresh:function(){var a=this.get("focus").year(),b=this.element.find("[data-year]").data("year");parseInt(b,10)!==a&&this.element.html($(this.compileTemplate()).html())},inRange:function(a){var b=this.get("range");if(a.month)return isInRange(a,b);if(a.toString().length<3){var c=this.get("focus");return isInRange(c.clone().month(a),b)}return isInRange(moment(a,this.get("format")),b)},_sync:function(a,b){return this.set("focus",a),this.refresh(),this.focus(a),null!==b&&this.trigger("select",a.month(),b),a}});module.exports=MonthColumn;var MONTHS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];