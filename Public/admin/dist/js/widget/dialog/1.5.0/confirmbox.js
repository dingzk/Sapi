/*! zuboke 2015-01-26 */
var $=require("jquery"),Dialog=require("./dialog"),template=require("./confirmbox.handlebars"),ConfirmBox=Dialog.extend({attrs:{title:"默认标题",confirmTpl:'<a class="ui-dialog-button-orange" href="javascript:;">确定</a>',cancelTpl:'<a class="ui-dialog-button-white" href="javascript:;">取消</a>',message:"默认内容"},setup:function(){ConfirmBox.superclass.setup.call(this);var a={classPrefix:this.get("classPrefix"),message:this.get("message"),title:this.get("title"),confirmTpl:this.get("confirmTpl"),cancelTpl:this.get("cancelTpl"),hasFoot:this.get("confirmTpl")||this.get("cancelTpl")};this.set("content",template(a))},events:{"click [data-role=confirm]":function(a){a.preventDefault(),this.trigger("confirm")},"click [data-role=cancel]":function(a){a.preventDefault(),this.trigger("cancel"),this.hide()}},_onChangeMessage:function(a){this.$("[data-role=message]").html(a)},_onChangeTitle:function(a){this.$("[data-role=title]").html(a)},_onChangeConfirmTpl:function(a){this.$("[data-role=confirm]").html(a)},_onChangeCancelTpl:function(a){this.$("[data-role=cancel]").html(a)}});ConfirmBox.alert=function(a,b,c){var d={message:a,title:"",cancelTpl:"",closeTpl:"",onConfirm:function(){b&&b(),this.hide()}};new ConfirmBox($.extend(null,d,c)).show().after("hide",function(){this.destroy()})},ConfirmBox.confirm=function(a,b,c,d,e){"object"!=typeof d||e||(e=d);var f={message:a,title:b||"确认框",closeTpl:"",onConfirm:function(){c&&c(),this.hide()},onCancel:function(){d&&d(),this.hide()}};new ConfirmBox($.extend(null,f,e)).show().after("hide",function(){this.destroy()})},ConfirmBox.show=function(a,b,c){var d={message:a,title:"",confirmTpl:!1,cancelTpl:!1};new ConfirmBox($.extend(null,d,c)).show().before("hide",function(){b&&b()}).after("hide",function(){this.destroy()})},module.exports=ConfirmBox;